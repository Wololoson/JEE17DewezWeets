package be.gestionhopital.DAO;

import javax.ws.rs.core.MultivaluedMap;

import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.core.util.MultivaluedMapImpl;

import be.gestionhopital.Models.Secretaire;

public class DAOSecretaire extends DAO<Secretaire> {
	public DAOSecretaire(WebResource conn) {
		super(conn);
	}

	@Override
	public boolean create(Secretaire obj) {
		MultivaluedMap<String, String> queryParams = new MultivaluedMapImpl();
		queryParams.add("nom", obj.getNom());
		queryParams.add("prenom", obj.getPrenom());
		queryParams.add("dateNaiss", obj.getDateNaiss().toString());
		queryParams.add("numTel", obj.getNumTelephone());
		queryParams.add("mdp", obj.getMotDePasse());
		queryParams.add("serv", obj.getService());
		
		ClientResponse response = connect.path("secretaire").type("application/x-www-form-urlencoded").post(ClientResponse.class, queryParams);
		if(response.getStatus() == 200) {
			return true;
		}
		else {
			return false;
		}
	}

	@Override
	public boolean delete(Secretaire obj) {
		MultivaluedMap<String, String> queryParams = new MultivaluedMapImpl();
		queryParams.add("id", Integer.toString(obj.getIdPersonne()));
		
		ClientResponse response = connect.path("secretaire").type("application/x-www-form-urlencoded").delete(ClientResponse.class, queryParams);
		if(response.getStatus() == 200) {
			return true;
		}
		else {
			return false;
		}
	}

	@Override
	public boolean update(Secretaire obj) {
		MultivaluedMap<String, String> queryParams = new MultivaluedMapImpl();
		queryParams.add("nom", obj.getNom());
		queryParams.add("prenom", obj.getPrenom());
		queryParams.add("dateNaiss", obj.getDateNaiss().toString());
		queryParams.add("numTel", obj.getNumTelephone());
		queryParams.add("mdp", obj.getMotDePasse());
		queryParams.add("serv", obj.getService());
		
		ClientResponse response = connect.path("secretaire").type("application/x-www-form-urlencoded").post(ClientResponse.class, queryParams);
		if(response.getStatus() == 200) {
			return true;
		}
		else {
			return false;
		}
	}

	@Override
	public Secretaire find(Secretaire obj) {
		return null;
	}
}
