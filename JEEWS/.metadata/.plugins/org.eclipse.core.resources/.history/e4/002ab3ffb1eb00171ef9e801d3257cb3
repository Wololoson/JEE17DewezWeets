package be.gestionhopital.DAO;

import javax.ws.rs.core.MultivaluedMap;

import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.core.util.MultivaluedMapImpl;

import be.gestionhopital.Models.Notification;

public class DAONotification extends DAO<Notification> {
	public DAONotification(WebResource conn) {
		super(conn);
	}

	@Override
	public boolean create(Notification obj) {
		MultivaluedMap<String, String> queryParams = new MultivaluedMapImpl();
		queryParams.add("priorite", Integer.toString(obj.getPriorite()));
		queryParams.add("type", Integer.toString(obj.getType()));
		queryParams.add("commentaire", obj.getCommentaire());
		queryParams.add("idChirurgien", Integer.toString(obj.getChirurgien().getIdPersonne()));
		
		ClientResponse response = connect.path("notification").type("application/x-www-form-urlencoded").post(ClientResponse.class, queryParams);
		if(response.getStatus() == 200) {
			return true;
		}
		else {
			return false;
		}
	}

	@Override
	public boolean delete(Notification obj) {
		return false;
	}

	@Override
	public boolean update(Notification obj) {
		MultivaluedMap<String, String> queryParams = new MultivaluedMapImpl();
		queryParams.add("priorite", Integer.toString(obj.getPriorite()));
		queryParams.add("type", Integer.toString(obj.getType()));
		queryParams.add("commentaire", obj.getCommentaire());
		queryParams.add("idChirurgien", Integer.toString(obj.getChirurgien().getIdPersonne()));
		
		ClientResponse response = connect.path("notification").type("application/x-www-form-urlencoded").post(ClientResponse.class, queryParams);
		if(response.getStatus() == 200) {
			return true;
		}
		else {
			return false;
		}
	}

	@Override
	public Notification find(Notification obj) {
		return null;
	}
}
